{"version":3,"sources":["main.js"],"names":["$siteList","$","$lastLi","find","x","localStorage","getItem","xObject","JSON","parse","hashMap","name","url","logo","simplifyUrl","replace","simplifyName","trim","render","remove","forEach","node","index","$li","insertBefore","on","window","open","e","stopPropagation","splice","prompt","indexOf","console","log","request","XMLHttpRequest","onreadystatechange","readyState","status","data","response","push","toUpperCase","description","alert","send","onbeforeunload","string","stringify","setItem"],"mappings":"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","file":"main.c933341a.js","sourceRoot":"../src","sourcesContent":["let $siteList = $('.siteList');\nconst $lastLi = $siteList.find('li:last')\n\nconst x = localStorage.getItem('x')\nconst xObject = JSON.parse(x)\n\nconst hashMap = xObject || [{\n        name: 'w3c',\n        url: 'https://www.w3.org/',\n        logo: 'W',\n    },\n    {\n        name: 'MDN',\n        url: 'https://developer.mozilla.org/zh-CN/',\n        logo: 'M',\n    },\n    {\n        name: '张鑫旭',\n        url: 'https://www.zhangxinxu.com/wordpress/',\n        logo: '张',\n    }\n]\n\n// 简化URL\nconst simplifyUrl = (url) => {\n    return url.replace('https://', '')\n        .replace('http://', '')\n        .replace('www.', '')\n        .replace(/\\/.*/, '') // 删除 / 开头的内容\n}\n\n// 简化网站名称\nconst simplifyName = (name) => {\n    return name.replace('[^\\w]*', '')\n        .replace('-', '')\n        .replace(',', '')\n        .replace('，', '')\n        .trim();\n}\n\n\n\nconst render = () => {\n    $siteList.find('li:not(:last)').remove()\n    hashMap.forEach((node, index) => {\n        const $li = $(`<li>\n        <div class=\"site\">\n          <div class=\"siteLogo\">${node.logo}</div>\n          <span class=\"siteName\">${node.name}</span>\n            <div class=\"removeSite\">\n                <svg class=\"icon\" aria-hidden=\"true\">\n                    <use xlink:href=\"#icon-delete\"></use>\n                </svg>\n            </div>\n        </div>\n      </li>`).insertBefore($lastLi)\n        $li.on('click', () => {\n            window.open(node.url)\n        })\n        $li.on('click', '.removeSite', (e) => {\n            e.stopPropagation() // 阻止冒泡\n            hashMap.splice(index, 1)\n            render()\n        })\n    })\n}\n\nrender();\n\n\n$('.addSite').on('click', () => {\n    let url = window.prompt('请问你要添加的网址是啥？')\n    if (url.indexOf('http') !== 0) {\n        url = 'https://' + url\n    }\n    console.log('%c 添加的网站的URL: ', 'color: orange; font-weight: bold;', url)\n    const request = new XMLHttpRequest();\n    request.open('GET', `https://textance.herokuapp.com/title/${url}`);\n    request.onreadystatechange = () => {\n        if (request.readyState === 4) {\n            if (request.status >= 200 && request.status <= 300) {\n                console.log('title获取成功！');\n                const data = request.response;\n                console.log(request.response);\n                console.log(simplifyName(data));\n                hashMap.push({\n                    name: simplifyName(data),\n                    logo: simplifyName(data)[0].toUpperCase(),\n                    url: url,\n                    description: '描述'\n                })\n                render()\n            } else {\n                alert('Title获取失败');\n            }\n        }\n    }\n    request.send();\n\n})\n\nwindow.onbeforeunload = () => {\n    const string = JSON.stringify(hashMap)\n    localStorage.setItem('x', string)\n}"]}